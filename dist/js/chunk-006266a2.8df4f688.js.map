{"version":3,"sources":["webpack:///./node_modules/vant/es/list/style/index.js","webpack:///./node_modules/vant/es/list/index.js","webpack:///./src/views/records/index.vue?2563","webpack:///./src/api/record.js","webpack:///src/views/records/index.vue","webpack:///./src/views/records/index.vue?8d0f","webpack:///./src/views/records/index.vue","webpack:///./src/assets/images/store-record-null-icon.png","webpack:///./src/assets/js/public.js","webpack:///./node_modules/vant/es/icon/style/index.js","webpack:///./src/views/records/index.vue?4c75"],"names":["__webpack_require__","_utils__WEBPACK_IMPORTED_MODULE_0__","_utils_scroll__WEBPACK_IMPORTED_MODULE_1__","_loading__WEBPACK_IMPORTED_MODULE_2__","_utils_event__WEBPACK_IMPORTED_MODULE_3__","_use","Object","sfc","bem","t","__webpack_exports__","model","prop","props","error","Boolean","loading","finished","errorText","String","loadingText","finishedText","immediateCheck","type","default","offset","Number","mounted","this","scroller","getScrollEventTarget","$el","handler","$nextTick","check","destroyed","activated","deactivated","watch","methods","el","scrollerHeight","getVisibleHeight","getComputedStyle","display","offsetParent","scrollTop","getScrollTop","targetBottom","reachBottom","scrollHeight","elBottom","getElementTop","$emit","clickErrorText","bind","binded","render","h","class","$slots","on","click","_vm","_h","$createElement","_c","_self","staticClass","style","min-height","$store","state","bodyH","list","length","attrs","finished-text","load","onLoad","value","callback","$$v","expression","_l","item","index","key","storeName","name","_v","_s","childItem","productName","payPrice","unitPrice","attrItem","attrIndex","number","receiptsDate","itemNum","paidAmount","_e","src","alt","staticRenderFns","getRecordData","data","postJson","recordsvue_type_script_lang_js_","components","_components","defineProperty","icon","currentPage","pageSize","totalCount","totalPage","computed","wait","ms","promise_default","a","r","setTimeout","_onLoad","asyncToGenerator","regeneratorRuntime","mark","_callee","that","wrap","_context","prev","next","abrupt","getData","stop","apply","arguments","_getData","_callee2","param","resData","_context2","record_getRecordData","sent","errorCode","result","page","forEach","ele","js_public","timeToDateTime","views_recordsvue_type_script_lang_js_","component","componentNormalizer","options","__file","module","exports","p","formatPhone","phone","toString","substr","toThousands","val","num","slice","timestamp","sym","formatNumber","n","date","Date","year","getFullYear","month","getMonth","day","getDate","map","join","timeToDate","getHours","m","getMinutes","s","getSeconds","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_061cf215_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_061cf215_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-006266a2.8df4f688.js","sourcesContent":["import '../../style/base.css';\nimport '../index.css';","import { use } from '../utils';\nimport utils from '../utils/scroll';\nimport Loading from '../loading';\nimport { on, off } from '../utils/event';\n\nvar _use = use('list'),\n    sfc = _use[0],\n    bem = _use[1],\n    t = _use[2];\n\nexport default sfc({\n  model: {\n    prop: 'loading'\n  },\n  props: {\n    error: Boolean,\n    loading: Boolean,\n    finished: Boolean,\n    errorText: String,\n    loadingText: String,\n    finishedText: String,\n    immediateCheck: {\n      type: Boolean,\n      default: true\n    },\n    offset: {\n      type: Number,\n      default: 300\n    }\n  },\n  mounted: function mounted() {\n    this.scroller = utils.getScrollEventTarget(this.$el);\n    this.handler(true);\n\n    if (this.immediateCheck) {\n      this.$nextTick(this.check);\n    }\n  },\n  destroyed: function destroyed() {\n    this.handler(false);\n  },\n  activated: function activated() {\n    this.handler(true);\n  },\n  deactivated: function deactivated() {\n    this.handler(false);\n  },\n  watch: {\n    loading: function loading() {\n      this.$nextTick(this.check);\n    },\n    finished: function finished() {\n      this.$nextTick(this.check);\n    }\n  },\n  methods: {\n    check: function check() {\n      if (this.loading || this.finished || this.error) {\n        return;\n      }\n\n      var el = this.$el;\n      var scroller = this.scroller;\n      var scrollerHeight = utils.getVisibleHeight(scroller);\n      /* istanbul ignore next */\n\n      if (!scrollerHeight || utils.getComputedStyle(el).display === 'none' || el.offsetParent === null) {\n        return;\n      }\n\n      var scrollTop = utils.getScrollTop(scroller);\n      var targetBottom = scrollTop + scrollerHeight;\n      var reachBottom = false;\n      /* istanbul ignore next */\n\n      if (el === scroller) {\n        reachBottom = scroller.scrollHeight - targetBottom < this.offset;\n      } else {\n        var elBottom = utils.getElementTop(el) - utils.getElementTop(scroller) + utils.getVisibleHeight(el);\n        reachBottom = elBottom - scrollerHeight < this.offset;\n      }\n      /* istanbul ignore else */\n\n\n      if (reachBottom) {\n        this.$emit('input', true);\n        this.$emit('load');\n      }\n    },\n    clickErrorText: function clickErrorText() {\n      this.$emit('update:error', false);\n      this.$nextTick(this.check);\n    },\n    handler: function handler(bind) {\n      /* istanbul ignore else */\n      if (this.binded !== bind) {\n        this.binded = bind;\n        (bind ? on : off)(this.scroller, 'scroll', this.check);\n      }\n    }\n  },\n  render: function render(h) {\n    return h(\"div\", {\n      \"class\": bem()\n    }, [this.$slots.default, this.loading && h(\"div\", {\n      \"class\": bem('loading')\n    }, [this.$slots.loading || [h(Loading, {\n      \"class\": bem('loading-icon')\n    }), h(\"span\", {\n      \"class\": bem('loading-text')\n    }, [this.loadingText || t('loading')])]]), this.finished && this.finishedText && h(\"div\", {\n      \"class\": bem('finished-text')\n    }, [this.finishedText]), this.error && this.errorText && h(\"div\", {\n      \"on\": {\n        \"click\": this.clickErrorText\n      },\n      \"class\": bem('error-text')\n    }, [this.errorText])]);\n  }\n});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recorde-contian bg-f4f5f6\",style:({'min-height': _vm.$store.state.bodyH + 'px'})},[_c('div',{staticClass:\"list-contian\"},[(!!_vm.list.length)?_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\" \"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('div',{key:index+item.storeName,staticClass:\"recorde-list-cell bg-fff border-box\"},[_c('div',{staticClass:\"recorde-list-cell_title flex flex-align-center font-12 border-bottom-1 padding-lr-12 border-box\"},[_c('div',{staticClass:\"recorde-list-cell_txt w-0 flex-1\"},[_c('van-icon',{staticClass:\"m-r-4\",attrs:{\"name\":\"shop-o\"}}),_vm._v(_vm._s(item.storeName))],1)]),_vm._l((item.list),function(childItem,key){return _c('div',{key:key,staticClass:\"recorde-list-cell_list\"},[_c('div',{staticClass:\"flex border-box padding-lr-12 p-t-10\"},[_c('div',{staticClass:\"recorde-list-cell_left flex-1\"},[_c('div',{staticClass:\"list-cell_left_name font-12 color-232326\"},[_vm._v(_vm._s(childItem.productName))])]),_c('div',{staticClass:\"recorde-list-cell_right flex-1 text-right\"},[_c('div',{staticClass:\"list-cell_right_num font-13 color-232326 \"},[_vm._v(_vm._s(childItem.payPrice))]),_c('div',{staticClass:\"list-cell_right_num font-13 color-848689 \"},[_c('s',[_vm._v(_vm._s(childItem.unitPrice))])])])]),_c('div',{staticClass:\"recorde-list-cell_sku flex flex-align-center border-bottom-1 border-box padding-lr-12\"},[_c('div',{staticClass:\"flex-1 font-12 color-848689\"},_vm._l((childItem.attrColorSize),function(attrItem,attrIndex){return _c('span',{key:attrIndex,class:[attrIndex>0? 'p-l-8': '']},[_vm._v(_vm._s(attrItem.key)+\": \"+_vm._s(attrItem.value)+\" \")])}),0),_c('div',{staticClass:\"flex-1 font-12 color-848689 text-right\"},[_c('van-icon',{attrs:{\"name\":\"cross\"}}),_vm._v(_vm._s(childItem.number))],1)])])}),_c('div',{staticClass:\"recorde-list-cell_sub flex flex-align-center border-box padding-lr-12\"},[_c('div',{staticClass:\"list-cell_sub_date flex-1 font-12 color-232326\"},[_vm._v(_vm._s(item.receiptsDate)+\" 购买\")]),_c('div',{staticClass:\"list-cell_sub_all flex-1 font-12 color-232326 text-right\"},[_vm._v(\"共\"+_vm._s(item.itemNum)+\"件商品 实付款: \"+_vm._s(item.paidAmount))])])],2)}),0):_vm._e()],1),(!_vm.list.length)?_c('div',{staticClass:\"no-recorde-data no-data-contain\"},[_c('img',{attrs:{\"src\":require(\"../../assets/images/store-record-null-icon.png\"),\"alt\":\"record-no-data\"}}),_c('p',{staticClass:\"font-16 color-848689\"},[_vm._v(\"暂无消费记录\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * 积分 api\r\n */\r\nimport { postJson } from './request';\r\n\r\n/* Common */\r\nexport const getRecordData = data => postJson('/gicfwh/load-group-order-record', data);\r\n","<template>\r\n  <div class=\"recorde-contian bg-f4f5f6\" :style=\"{'min-height': $store.state.bodyH + 'px'}\">\r\n    <div class=\"list-contian\">\r\n      <van-list\r\n        v-if=\"!!list.length\"\r\n        v-model=\"loading\"\r\n        :finished=\"finished\"\r\n        finished-text=\" \"\r\n        @load=\"onLoad\">\r\n        <div class=\"recorde-list-cell bg-fff border-box\" v-for=\"(item,index) in list\" :key=\"index+item.storeName\">\r\n          <div\r\n            class=\"recorde-list-cell_title flex flex-align-center font-12 border-bottom-1 padding-lr-12 border-box\">\r\n            <div class=\"recorde-list-cell_txt w-0 flex-1\"><van-icon name=\"shop-o\" class=\"m-r-4\" />{{ item.storeName }}</div>\r\n          </div>\r\n          <div class=\"recorde-list-cell_list\" v-for=\"(childItem,key) in item.list\" :key=\"key\">\r\n            <div class=\"flex border-box padding-lr-12 p-t-10\">\r\n              <div class=\"recorde-list-cell_left flex-1\">\r\n                <div class=\"list-cell_left_name font-12 color-232326\">{{ childItem.productName }}</div>\r\n              </div>\r\n              <div class=\"recorde-list-cell_right flex-1 text-right\">\r\n                <div class=\"list-cell_right_num font-13 color-232326 \">{{ childItem.payPrice }}</div>\r\n                <div class=\"list-cell_right_num font-13 color-848689 \"><s>{{ childItem.unitPrice }}</s></div>\r\n              </div>\r\n            </div>\r\n            <div class=\"recorde-list-cell_sku flex flex-align-center border-bottom-1 border-box padding-lr-12\">\r\n              <div class=\"flex-1 font-12 color-848689\">\r\n                <span v-for=\"(attrItem,attrIndex) in childItem.attrColorSize\" :key=\"attrIndex\" :class=\"[attrIndex>0? 'p-l-8': '']\">{{ attrItem.key }}: {{ attrItem.value }} </span>\r\n              </div>\r\n              <div class=\"flex-1 font-12 color-848689 text-right\"><van-icon name=\"cross\"></van-icon>{{ childItem.number}}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"recorde-list-cell_sub flex flex-align-center border-box padding-lr-12\">\r\n            <div class=\"list-cell_sub_date flex-1 font-12 color-232326\">{{ item.receiptsDate }} 购买</div>\r\n            <div class=\"list-cell_sub_all flex-1 font-12 color-232326 text-right\">共{{ item.itemNum }}件商品 实付款: {{ item.paidAmount }}</div>\r\n          </div>\r\n        </div>\r\n      </van-list>\r\n    </div>\r\n    <div class=\"no-recorde-data no-data-contain\" v-if=\"!list.length\">\r\n      <img src=\"../../assets/images/store-record-null-icon.png\" alt=\"record-no-data\"/>\r\n      <p class=\"font-16 color-848689\">暂无消费记录</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { List, Icon  } from 'vant';\r\nimport publicMethod from '@/assets/js/public.js';\r\nimport { getRecordData } from '@/api/record.js';\r\nexport default {\r\n  name: \"record\",\r\n  components: {\r\n    [List.name]: List,\r\n    [Icon.name]: Icon\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      pageSize: 5,\r\n      totalCount: 0,\r\n      totalPage: 0,\r\n      list: [\r\n         /* {\r\n          storeName: 'MG江苏南京秦淮区大洋百货新街口店(MATERIAL GIRL)333333',\r\n          receiptsDate: '2018-12-06',\r\n          itemNum: '1',\r\n          paidAmount: '12345.90',\r\n          list: [\r\n            {\r\n              productName: '哥斯拉加厚白色鸭绒羽绒服女中长款2018冬装新款绿连帽外套太平鸟333333',\r\n              payPrice: '1059.99',\r\n              unitPrice: '1899.00',\r\n              number: '1',\r\n              attrColorSize: [\r\n                {\r\n                  key: '尺码',\r\n                  value: '元气绿',\r\n                },\r\n                {\r\n                  key: '颜色',\r\n                  value: 'M',\r\n                },\r\n              ]\r\n            },\r\n            {\r\n              productName: '哥斯拉加厚白色鸭绒羽绒服女中长款2018冬装新款绿连帽外套太平鸟333333',\r\n              payPrice: '1059.99',\r\n              unitPrice: '1899.00',\r\n              number: '1',\r\n              attrColorSize: [\r\n                {\r\n                  key: '尺码',\r\n                  value: '元气绿',\r\n                },\r\n                {\r\n                  key: '颜色',\r\n                  value: 'M',\r\n                },\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          storeName: 'MG江苏南京秦淮区大洋百货新街口店(MATERIAL GIRL)333333',\r\n          receiptsDate: '2018-12-06',\r\n          itemNum: '1',\r\n          paidAmount: '12345.90',\r\n          list: [\r\n            {\r\n              productName: '哥斯拉加厚白色鸭绒羽绒服女中长款2018冬装新款绿连帽外套太平鸟333333',\r\n              payPrice: '1059.99',\r\n              unitPrice: '1899.00',\r\n              number: '1',\r\n              attrColorSize: [\r\n                {\r\n                  key: '尺码',\r\n                  value: '元气绿',\r\n                },\r\n                {\r\n                  key: '颜色',\r\n                  value: 'M',\r\n                },\r\n              ]\r\n            },\r\n            {\r\n              productName: '哥斯拉加厚白色鸭绒羽绒服女中长款2018冬装新款绿连帽外套太平鸟333333',\r\n              payPrice: '1059.99',\r\n              unitPrice: '1899.00',\r\n              number: '1',\r\n              attrColorSize: [\r\n                {\r\n                  key: '尺码',\r\n                  value: '元气绿',\r\n                },\r\n                {\r\n                  key: '颜色',\r\n                  value: 'M',\r\n                },\r\n              ]\r\n            }\r\n          ]\r\n        } */\r\n      ],\r\n      loading: false,\r\n      finished: false\r\n    };\r\n  },\r\n\r\n  computed: {\r\n\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * sleep\r\n     */\r\n    wait(ms) {\r\n      return new Promise(r => setTimeout(r, ms));\r\n    },\r\n\r\n    async onLoad() {\r\n      const that = this;\r\n      // 异步更新数据\r\n      await that.wait(1000);\r\n      if (that.currentPage >= that.totalPage) {\r\n        // 加载状态结束\r\n        that.loading = false;\r\n        that.finished = true;\r\n        return false;\r\n      }\r\n      that.currentPage = that.currentPage + 1;\r\n      await that.getData();\r\n\r\n      // 加载状态结束\r\n      that.loading = false;\r\n      // 数据全部加载完成\r\n      if (that.list.length >= that.totalCount) {\r\n        that.finished = true;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 获取消费记录数据\r\n     */\r\n    async getData() {\r\n      const that = this;\r\n      let param = {\r\n        // memberId: that.$store.state.memberId,\r\n        currentPage: that.currentPage,\r\n        pageSize: that.pageSize\r\n      }\r\n      let resData = await getRecordData(param);\r\n      if (resData.errorCode == 0) {\r\n        resData.result.page.result.forEach(ele => {\r\n          ele.receiptsDate = publicMethod.timeToDateTime(ele.receiptsDate);\r\n        });\r\n        that.list = resData.result.page.result || [];\r\n        that.totalPage = resData.result.page.totalPage;\r\n        that.currentPage = resData.result.page.currentPage;\r\n        that.totalCount =  resData.result.page.totalCount;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    let that = this;\r\n    that.getData();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n.recorde-list-cell {\r\n  &+.recorde-list-cell {\r\n    margin-top: 10px;\r\n  }\r\n}\r\n.recorde-list-cell_title {\r\n  width: 100%;\r\n  height: 42px;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n\r\n  .van-icon-shop-o {\r\n    vertical-align: -1px;\r\n  }\r\n\r\n  .recorde-list-cell_txt {\r\n\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n  }\r\n}\r\n\r\n.recorde-list-cell_sub {\r\n  height: 42px;\r\n}\r\n\r\n.recorde-list-cell_left {\r\n  min-width: 70%;\r\n  .list-cell_left_name {\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 2;\r\n    line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n    box-orient: vertical;\r\n    word-break: break-all;\r\n    overflow: hidden;\r\n  }\r\n}\r\n\r\n.recorde-list-cell_sku {\r\n  height: 42px;\r\n}\r\n\r\n.van-icon-cross {\r\n  vertical-align: -2px;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=061cf215&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=061cf215&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"061cf215\",\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/store-record-null-icon.0fe1a17f.png\";","/**\r\n * 手机号格式化\r\n * import formatPhone from '@/assets/js/public.js';\r\n * formatPhone.formatPhone(12345678900)\r\n * @param {String} phone\r\n */\r\nconst formatPhone = (phone) => {\r\n  phone = phone.toString();\r\n  return phone.substr(0, 3) + '****' + phone.substr(7, 11);\r\n};\r\n\r\n/**\r\n * 千分位格式化\r\n * @param {数字} val\r\n */\r\nconst toThousands = (val) => {\r\n  let num = (val || 0).toString(),\r\n    result = '';\r\n  while (num.length > 3) {\r\n    result = ',' + num.slice(-3) + result;\r\n    num = num.slice(0, num.length - 3);\r\n  }\r\n  if (num) {\r\n    result = num + result;\r\n  }\r\n  return result;\r\n};\r\n\r\n/**\r\n * 时间戳转换年-月 日\r\n * @param timestamp,\r\n */\r\nfunction timeToDateTime(timestamp, sym) {\r\n  // 格式化 timestamp 返回年月日\r\n  function formatNumber(n) {\r\n    //对于小于 10 的数字返回 0[1-9]\r\n    n = n.toString();\r\n    return n[1] ? n : '0' + n;\r\n  }\r\n  if (timestamp != null) {\r\n    let date = new Date(timestamp);\r\n    let year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n    return [year, month, day].map(formatNumber).join(sym || '-');\r\n  }\r\n  return '--';\r\n}\r\n\r\n/**\r\n * 时间戳转换年-月 日\r\n * @param timestamp,\r\n */\r\nfunction timeToDate(timestamp, sym) {\r\n  // 格式化 timestamp 返回年月日\r\n  function formatNumber(n) {\r\n    //对于小于 10 的数字返回 0[1-9]\r\n    n = n.toString();\r\n    return n[1] ? n : '0' + n;\r\n  }\r\n  if (timestamp != null) {\r\n    let date = new Date(timestamp);\r\n    let year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n    let h = date.getHours();\r\n    let m = date.getMinutes();\r\n    let s = date.getSeconds();\r\n    return [year, month, day].map(formatNumber).join(sym || '-') +' '+[h, m, s].map(formatNumber).join(':');\r\n  }\r\n  return '--';\r\n}\r\n\r\nexport default {\r\n  formatPhone,\r\n  toThousands,\r\n  timeToDateTime,\r\n  timeToDate\r\n}\r\n","import '../../style/base.css';","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=061cf215&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=061cf215&lang=less&scoped=true&\""],"sourceRoot":""}